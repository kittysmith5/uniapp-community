{"version":3,"sources":[null,"webpack:///H:/Code/Uniapp/community/study/components/login.vue?2a7e","webpack:///H:/Code/Uniapp/community/study/components/login.vue?1ba9","webpack:///H:/Code/Uniapp/community/study/components/login.vue?4f02","uni-app:///components/login.vue","webpack:///H:/Code/Uniapp/community/study/components/login.vue?7df3","webpack:///H:/Code/Uniapp/community/study/components/login.vue?27d3"],"names":["name","data","show","getUserInfoTag","loginType","subsectionList","form","login","avatar","phone","email","code","password","repassword","rules","validator","message","trigger","asyncValidator","res","callback","onReady","created","wx","success","uni","console","fail","methods","gotoWeb","url","getWechatUserInfo","getCode","pcode","title","content","cancel","submit","valid","icon","resa","verifiable_code","resaa","verifiable_type","resb","resc","loginAfter","liked","commented","sectionChange"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACqM;AACrM,gBAAgB,6MAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7DA;AAAA;AAAA;AAAA;AAA+vB,CAAgB,+wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACmLnxB;AAEA;AAAA;AAAA,eAEA;EACAA;EACAC;IAAA;IACA;MACAC;MACA;;MAEAC;MAOAC;MACA;MACAC;QACAL;MACA,GACA;QACAA;MACA,GACA;QACAA;MACA,GACA;QACAA;MACA,EACA;MACA;MACAM;QACAC;QACAC;QACAR;QACAS;QACAC;QACAC;QACAC;QACAC;MACA;MACA;MACAC;QACA;QACAP;UACAQ;YACA;YACA;cACA;YACA;cACA;YACA;UACA;UACAC;UACAC;QACA;QACA;QACAjB;UACAkB;YAAA;cAAA;cAAA;gBAAA;kBAAA;oBAAA;sBAAA,MAEA;wBAAA;wBAAA;sBAAA;sBAAA;sBAAA,OACA;wBACAlB;sBACA;oBAAA;sBAFAmB;sBAGA;wBACAC;sBACA;wBACAA;sBACA;sBAAA;sBAAA;oBAAA;sBAEAA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA,CAEA;YAAA;cAAA;YAAA;YAAA;UAAA;UACAH;QACA,GACA;UACAF;YACA;cACA;YACA;cACA;YACA;UACA;UACAC;UACAC;QACA,EACA;QACA;QACAR;UACAS;YAAA;cAAA;cAAA;gBAAA;kBAAA;oBAAA;sBAAA,MAEA;wBAAA;wBAAA;sBAAA;sBAAA;sBAAA,OACA;wBACAlB;sBACA;oBAAA;sBAFAmB;sBAGA;wBACAC;sBACA;wBACA;wBACAA;sBACA;sBAAA;sBAAA;oBAAA;sBAEAA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA,CAEA;YAAA;cAAA;YAAA;YAAA;UAAA;UACAH;QACA,GACA;UACAF;YACA;YACA;cACA;cACA;YACA;cACA;YACA;UACA;UACAC;UACAC;QACA,EACA;QACA;QACAP;UACAQ;YAAA;cAAA;cAAA;gBAAA;kBAAA;oBAAA;sBAAA,MACA;wBAAA;wBAAA;sBAAA;sBAAA;sBAAA,OACA;wBACAlB;sBACA;oBAAA;sBAFAmB;sBAGA;wBACAC;sBACA;wBACAA;sBACA;sBAAA;sBAAA;oBAAA;sBAEAA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA,CAEA;YAAA;cAAA;YAAA;YAAA;UAAA;UACAH;QACA,GACA;UACAF;YACA;cACA;cACA;YACA;cACA;YACA;UACA;UACAC;UACA;UACAC;QACA,EACA;QACA;QACAN;UACAI;YACA;cACA;cACA;YACA;cACA;YACA;UACA;UACAC;UACA;UACAC;QACA;QACA;QACAL;UACAG;YACA;YACA;cACA;cACA;YACA;cACA;YACA;UACA;UACAC;UACAC;QACA;QACAJ;UACAE;YACA;cACA;YACA;cACA;YACA;UAEA;UACAC;UACA;UACAC;QACA;MACA;IAEA;EACA;EACA;EACAI;IACA;EACA;EACAC;IAAA;IAEAC;MACAC;QACA;UACAC;YACAD;cACAE;cACA;cACA;cACA;cACA;cACA;cACA;YACA;YACAC;cACAD;YACA;UACA;QACA;MACA;IACA;EAEA;EACAE,yCACA;IACAC;MACAN;QACAO;MACA;IACA;IACA;IACAC;MAAA;MACAN;QACAD;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;QACAG;UACAD;QACA;MACA;IACA;IACA;IACAM;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBACAvB;gBACA;cAAA;gBAFAwB;gBAGA;kBACAR;oBACAS;oBACAC;kBACA;gBACA;kBACAV;oBACAS;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MACA;QACA7B;QACAP;QACAS;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IACA;IACAwB;MAAA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA,IACAC;oBAAA;oBAAA;kBAAA;kBACAb;oBACAS;oBACAK;kBACA;kBAAA,kCACA;gBAAA;kBAAA,eAEA;kBAAA,kCACA,iCAiBA,oCAeA,gCAuBA;kBAAA;gBAAA;kBAAA;kBAAA,OAtDA;oBACAhC;oBACAK;kBACA;gBAAA;kBAHA4B;kBAIAd;kBACA;oBACA;oBACA;kBACA;oBACAA;oBACAD;sBACAS;sBACAC;oBACA;kBACA;kBAAA;gBAAA;kBAAA;kBAAA,OAGA;oBACA5B;oBACAkC;kBACA;gBAAA;kBAHAC;kBAIA;oBACA;oBACA;kBACA;oBACAjB;sBACAS;sBACAC;oBACA;kBACA;kBAAA;gBAAA;kBAAA;kBAAA,OAGA;oBACA;oBACAnC;oBACA;oBACA2C;oBACA;oBACAF;oBACA;oBACAhC;oBACA;oBACAG;kBACA;gBAAA;kBAXAgC;kBAYA;oBACA;oBACA;kBACA;oBACAnB;sBACAS;sBACAC;oBACA;kBACA;kBAAA;gBAAA;kBAAA;kBAAA,OAGA;oBACA;oBACAnC;oBACA;oBACA2C;oBACA;oBACAF;oBACA;oBACA/B;oBACA;oBACAE;kBACA;gBAAA;kBAXAiC;kBAYAnB;kBACA;oBACA;oBACA;kBACA;oBACAD;sBACAS;sBACAC;oBACA;kBACA;kBAAA;gBAAA;kBAGAV;oBACAS;oBACAK;kBACA;kBAAA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAGA;QAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAO;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACArB;gBAAA;gBAAA,OAEA;cAAA;gBAAAN;gBACAO;gBACA;kBACA1B;kBACAQ;kBACAuC;kBACAC;gBACA;gBACAvB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAwB;MACA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;UACA;UACA;MAAA;IAEA;EAAA;AAEA;AAAA,2B;;;;;;;;;;;;;ACllBA;AAAA;AAAA;AAAA;AAAk8C,CAAgB,s5CAAG,EAAC,C;;;;;;;;;;;ACAt9C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/login.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=27539ebe&scoped=true&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=27539ebe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"27539ebe\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/login.vue\"\nexport default component.exports","export * from \"-!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=template&id=27539ebe&scoped=true&\"","var components\ntry {\n  components = {\n    uForm: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-form/u-form\" */ \"uview-ui/components/u-form/u-form.vue\"\n      )\n    },\n    uFormItem: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-form-item/u-form-item\" */ \"uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-input/u-input\" */ \"uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uSubsection: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-subsection/u-subsection\" */ \"uview-ui/components/u-subsection/u-subsection.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.show = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.show = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"","<template>\r\n  <view\r\n    class=\"login\"\r\n    :class=\"{show:show}\"\r\n  >\r\n    <view\r\n      class=\"mask\"\r\n      @tap=\"show = false\"\r\n      bind:tap=\"cancel\"\r\n      catch:touchmove=\"emptyHandler\"\r\n    ></view>\r\n    <view class=\"container\">\r\n\r\n      <view\r\n        class=\"close-box\"\r\n        @tap=\"show = false\"\r\n        bind:tap=\"cancel\"\r\n      >\r\n        <image\r\n          class=\"close-img\"\r\n          src=\"/static/close.png\"\r\n        />\r\n      </view>\r\n\r\n      <view\r\n        class=\"p-name\"\r\n        v-if=\"getUserInfoTag\"\r\n      >\r\n        前端交流学习中心欢迎你\r\n      </view>\r\n      <!-- #ifdef MP-WEIXIN -->\r\n      <button\r\n        class=\"submit-btn\"\r\n        open-type=\"getUserInfo\"\r\n        @getuserinfo=\"getWechatUserInfo\"\r\n        v-if=\"getUserInfoTag\"\r\n      >\r\n        <image\r\n          src=\"/static/wechat.png\"\r\n          class=\"wechat-img\"\r\n        />\r\n        <text>点击获取微信用户信息</text>\r\n      </button>\r\n      <!-- #endif -->\r\n      <u-form\r\n        :model=\"form\"\r\n        ref=\"uForm\"\r\n        v-show=\"!getUserInfoTag\"\r\n      >\r\n        <u-form-item\r\n          label=\"账号\"\r\n          prop=\"login\"\r\n          label-width=\"150\"\r\n          required\r\n          v-if=\"loginType === 'pwlogin'\"\r\n        >\r\n          <u-input\r\n            v-model=\"form.login\"\r\n            placeholder='输入手机号/邮箱/昵称'\r\n          />\r\n        </u-form-item>\r\n\r\n        <u-form-item\r\n          label=\"昵称\"\r\n          prop=\"name\"\r\n          label-width=\"150\"\r\n          required\r\n          v-if=\"loginType === 'phone' || loginType === 'email'\"\r\n        >\r\n          <u-input\r\n            v-model=\"form.name\"\r\n            placeholder='2-10个字符'\r\n          />\r\n        </u-form-item>\r\n\r\n        <u-form-item\r\n          label=\"电话\"\r\n          prop=\"phone\"\r\n          label-width=\"150\"\r\n          required\r\n          v-if=\"loginType === 'phone' || loginType === 'codelogin'\"\r\n        >\r\n          <u-input\r\n            v-model=\"form.phone\"\r\n            placeholder='输入11位手机号码'\r\n          />\r\n        </u-form-item>\r\n        <u-form-item\r\n          label=\"邮箱\"\r\n          prop=\"email\"\r\n          label-width=\"150\"\r\n          required\r\n          v-if=\"loginType === 'email'\"\r\n        >\r\n          <u-input\r\n            v-model=\"form.email\"\r\n            placeholder='输入邮箱'\r\n          />\r\n        </u-form-item>\r\n\r\n        <u-form-item\r\n          label=\"验证码\"\r\n          prop=\"code\"\r\n          required\r\n          label-width=\"150\"\r\n          v-if=\"loginType !== 'pwlogin'\"\r\n        >\r\n          <u-input\r\n            placeholder=\"请输入4位验证码\"\r\n            v-model=\"form.code\"\r\n            type=\"text\"\r\n          ></u-input>\r\n          <u-button\r\n            slot=\"right\"\r\n            type=\"success\"\r\n            size=\"mini\"\r\n            @click=\"getCode\"\r\n          >获取验证码</u-button>\r\n        </u-form-item>\r\n\r\n        <u-form-item\r\n          label=\"密码\"\r\n          label-width=\"150\"\r\n          required\r\n          prop=\"password\"\r\n          v-if=\"loginType !== 'codelogin'\"\r\n        >\r\n          <u-input\r\n            v-model=\"form.password\"\r\n            type=\"password\"\r\n            placeholder='限4-20个字符,区分大小写'\r\n          />\r\n        </u-form-item>\r\n        <u-form-item\r\n          label=\"重复密码\"\r\n          required\r\n          label-width=\"150\"\r\n          prop=\"repassword\"\r\n          v-if=\"loginType === 'phone' || loginType === 'email'\"\r\n        >\r\n          <u-input\r\n            v-model=\"form.repassword\"\r\n            type=\"password\"\r\n            placeholder='再次输入密码'\r\n          />\r\n        </u-form-item>\r\n        <view class=\"btns\">\r\n          <u-button\r\n            class=\"ubtn\"\r\n            @click=\"submit\"\r\n          >提交</u-button>\r\n          <u-button\r\n            class=\"ubtn\"\r\n            @click=\"cancel\"\r\n          >取消</u-button>\r\n        </view>\r\n        <view class=\"type\">\r\n          <u-subsection\r\n            active-color=\"#007cba\"\r\n            font-size=\"20\"\r\n            height=\"52\"\r\n            :list=\"subsectionList\"\r\n            :current=\"0\"\r\n            @change=\"sectionChange\"\r\n          ></u-subsection>\r\n        </view>\r\n      </u-form>\r\n\r\n\r\n      <view class=\"serve-info\">点击登录/注册前端论坛，即表示已阅读并同意</view>\r\n      <view class=\"serve-text\">\r\n        <view @tap=\"gotoWeb('https://uniapp.dcloud.io/component/mp-weixin-plugin')\">《隐私政策》</view>\r\n        <view @tap=\"gotoWeb('https://developers.weixin.qq.com/miniprogram/dev/framework/')\">《用户协议》</view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    mapActions\r\n  } from 'vuex'\r\n\r\n  export default {\r\n    name: \"login\",\r\n    data() {\r\n      return {\r\n        show: true,\r\n        // 是否获取用户信息\r\n        // #ifdef MP-WEIXIN\r\n        getUserInfoTag: true,\r\n        // #endif\r\n\r\n        // #ifndef MP-WEIXIN\r\n        getUserInfoTag: false,\r\n        // #endif\r\n\r\n        loginType: 'pwlogin',\r\n        // 登陆方式选择器\r\n        subsectionList: [{\r\n            name: '密码登陆'\r\n          },\r\n          {\r\n            name: '验证码登陆'\r\n          },\r\n          {\r\n            name: '手机注册'\r\n          },\r\n          {\r\n            name: '邮箱注册'\r\n          }\r\n        ],\r\n        // 用户信息输入框\r\n        form: {\r\n          login: '',\r\n          avatar: '',\r\n          name: '',\r\n          phone: '',\r\n          email: '',\r\n          code: '',\r\n          password: '',\r\n          repassword: ''\r\n        },\r\n        // 用户输入规则校验\r\n        rules: {\r\n          // 密码登陆账号校验，该输入可以是：手机号、邮箱、昵称\r\n          login: [{\r\n            validator: (rule, value, callback) => {\r\n              // 只有在 密码登陆 的情况下才需要进行前端规则校验\r\n              if (this.loginType === 'pwlogin') {\r\n                return !this.$u.test.isEmpty(value)\r\n              } else {\r\n                return true\r\n              }\r\n            },\r\n            message: '必填 * 输入内容不许为空',\r\n            trigger: ['change', 'blur'],\r\n          }],\r\n          // 电话、邮件注册校验\r\n          name: [{\r\n              asyncValidator: async (rule, value, callback) => {\r\n                // 只有在 电话、邮箱注册的时候才会触发该校验规则\r\n                if (this.loginType === 'phone' || this.loginType === 'email') {\r\n                  let res = await this.$u.api.findUser({\r\n                    name: value\r\n                  })\r\n                  if (!!value && res.statusCode === 200) {\r\n                    callback(new Error('当前用户昵称已存在'))\r\n                  } else {\r\n                    callback()\r\n                  }\r\n                } else {\r\n                  callback()\r\n                }\r\n              },\r\n              trigger: ['blur'],\r\n            },\r\n            {\r\n              validator: (rule, value, callback) => {\r\n                if (this.loginType === 'phone' || this.loginType === 'email') {\r\n                  return this.$u.test.rangeLength(value, [2, 10])\r\n                } else {\r\n                  return true\r\n                }\r\n              },\r\n              message: '必填 * 昵称长度不得小于2位大于10位',\r\n              trigger: ['change', 'blur'],\r\n            }\r\n          ],\r\n          // 手机验证码登陆、手机验证码注册 使用\r\n          phone: [{\r\n              asyncValidator: async (rule, value, callback) => {\r\n                // 只有在手机验证码注册的时候，才需要判断当前手机号码是否已经被注册\r\n                if (this.loginType === 'phone') {\r\n                  let res = await this.$u.api.findUser({\r\n                    name: value\r\n                  })\r\n                  if (!!value && res.statusCode === 200) {\r\n                    callback(new Error('当前电话已注册'))\r\n                  } else {\r\n                    // 如果校验通过，也要执行callback()回调\r\n                    callback()\r\n                  }\r\n                } else {\r\n                  callback()\r\n                }\r\n              },\r\n              trigger: ['blur'],\r\n            },\r\n            {\r\n              validator: (rule, value, callback) => {\r\n                // 手机号码格式判断\r\n                if (this.loginType === 'codelogin' || this.loginType === 'phone') {\r\n                  // 自带判断 电话号码合法性方法\r\n                  return this.$u.test.mobile(value)\r\n                } else {\r\n                  return true\r\n                }\r\n              },\r\n              message: '必填 * 手机号码输入不正确',\r\n              trigger: ['change', 'blur'],\r\n            }\r\n          ],\r\n          // 只有在邮箱 注册的时候才需要使用\r\n          email: [{\r\n              asyncValidator: async (rule, value, callback) => {\r\n                if (this.loginType === 'email') {\r\n                  let res = await this.$u.api.findUser({\r\n                    name: value\r\n                  })\r\n                  if (!!value && res.statusCode === 200) {\r\n                    callback(new Error('当前邮箱已注册'));\r\n                  } else {\r\n                    callback()\r\n                  }\r\n                } else {\r\n                  callback()\r\n                }\r\n              },\r\n              trigger: ['blur'],\r\n            },\r\n            {\r\n              validator: (rule, value, callback) => {\r\n                if (this.loginType === 'email') {\r\n                  // 自带判断 邮箱地址合法性方法\r\n                  return this.$u.test.email(value)\r\n                } else {\r\n                  return true\r\n                }\r\n              },\r\n              message: '必填 * 邮箱地址输入不正确',\r\n              // 触发器可以同时用blur和change\r\n              trigger: ['change', 'blur'],\r\n            }\r\n          ],\r\n          // 验证码验证\r\n          code: [{\r\n            validator: (rule, value, callback) => {\r\n              if (this.loginType !== 'pwlogin') {\r\n                // 名字长度为 2-10 位\r\n                return value === '8888'\r\n              } else {\r\n                return true\r\n              }\r\n            },\r\n            message: '必填 * 验证码长度为4位',\r\n            // 触发器可以同时用blur和change\r\n            trigger: ['change', 'blur'],\r\n          }],\r\n          // 密码验证\r\n          password: [{\r\n            validator: (rule, value, callback) => {\r\n              // 除了 手机验证码登陆 其他均需要验证\r\n              if (this.loginType !== 'codelogin') {\r\n                // 名字长度为 2-10 位\r\n                return (value.length >= 4 && value.length <= 20)\r\n              } else {\r\n                return true\r\n              }\r\n            },\r\n            message: '必填  * 请输入 4-20 位密码',\r\n            trigger: ['change', 'blur'],\r\n          }],\r\n          repassword: [{\r\n            validator: (rule, value, callback) => {\r\n              if (this.loginType === 'phone' || this.loginType === 'email') {\r\n                return this.form.password === value\r\n              } else {\r\n                return false\r\n              }\r\n\r\n            },\r\n            message: '必填 * 两次密码输入不一致',\r\n            // 触发器可以同时用blur和change\r\n            trigger: ['change', 'blur'],\r\n          }],\r\n        }\r\n\r\n      }\r\n    },\r\n    // 必须要在onReady生命周期设置校验规则，因为onLoad生命周期组件可能尚未创建完毕\r\n    onReady() {\r\n      this.$refs.uForm.setRules(this.rules);\r\n    },\r\n    created() {\r\n      // #ifdef MP-WEIXIN\r\n      wx.getSetting({\r\n        success: res => {\r\n          if (res.authSetting[\"scope.userInfo\"]) {\r\n            uni.getUserInfo({\r\n              success: res => {\r\n                console.log('res', res)\r\n                // 如果用户授权了，则做两件事，第一件事是判断当前微信用户是否注册\r\n                this.form.login = res.userInfo.nickName\r\n                this.form.name = res.userInfo.nickName\r\n                this.form.avatar = res.userInfo.avatarUrl\r\n                // 第二件事当前用户若是已完成注册则直接登录，如果未完成注册则用户在点击登录时完成登录\r\n                this.getUserInfoTag = false\r\n              },\r\n              fail: () => {\r\n                console.log('用户未授权！')\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n      // #endif\r\n    },\r\n    methods: {\r\n      ...mapActions(['userLoginAction']),\r\n      gotoWeb(url) {\r\n        wx.navigateTo({\r\n          url: '/pages/webview/webview?url=' + encodeURI(url)\r\n        })\r\n      },\r\n      // 微信授权\r\n      getWechatUserInfo() {\r\n        uni.getUserInfo({\r\n          success: res => {\r\n            // console.log(res);\r\n            // // 进行下一步操作\r\n            // this.getUserInfoTag = false;\r\n            this.form.login = res.userInfo.nickName;\r\n            this.form.name = res.userInfo.nickName;\r\n            this.form.avatar = res.userInfo.avatarUrl;\r\n            this.getUserInfoTag = false\r\n          },\r\n          fail: () => {\r\n            console.log('用户未授权！')\r\n          }\r\n        })\r\n      },\r\n      // 获取验证码\r\n      async getCode() {\r\n        let pcode = await this.$u.api.getLoginCode({\r\n          phone: this.form.phone\r\n        })\r\n        if (!!pcode.data.message && pcode.data.message[0] === \"获取成功\") {\r\n          uni.showModal({\r\n            title: '验证码获取成功',\r\n            content: '8888'\r\n          })\r\n        } else {\r\n          uni.showModal({\r\n            title: '验证码获取失败',\r\n            content: pcode.data.errors.phone[0]\r\n          })\r\n        }\r\n      },\r\n      // 取消表单输入\r\n      cancel() {\r\n        this.form = {\r\n          login: '',\r\n          name: '',\r\n          phone: '',\r\n          email: '',\r\n          code: '',\r\n          password: '',\r\n          repassword: ''\r\n        }\r\n      },\r\n      // 提交输入\r\n      submit() {\r\n        this.$refs.uForm.validate(async valid => {\r\n          if (!valid) {\r\n            uni.showToast({\r\n              title: '请检查输入',\r\n              icon: 'loading'\r\n            })\r\n            return false\r\n          }\r\n          switch (this.loginType) {\r\n            case \"pwlogin\":\r\n              let resa = await this.$u.api.userLogin({\r\n                login: this.form.login,\r\n                password: this.form.password,\r\n              })\r\n              console.log(\"resa\", resa)\r\n              if (resa.access_token) {\r\n                // 登陆成功\r\n                this.loginAfter(resa.access_token)\r\n              } else {\r\n                console.log('reas.message', reas.message)\r\n                uni.showModal({\r\n                  title: '登陆失败',\r\n                  content: resa.message\r\n                })\r\n              }\r\n              break;\r\n            case \"codelogin\":\r\n              let resaa = await this.$u.api.userLogin({\r\n                login: this.form.phone,\r\n                verifiable_code: '8888'\r\n              })\r\n              if (resaa.statusCode === 200) {\r\n                // 登陆成功\r\n                this.loginAfter(resaa.access_token)\r\n              } else {\r\n                uni.showModal({\r\n                  title: '登陆失败',\r\n                  content: resa.message\r\n                })\r\n              }\r\n              break;\r\n            case \"phone\":\r\n              let resb = await this.$u.api.userRegister({\r\n                // 必须，用户名\r\n                name: this.form.name,\r\n                // 必须，验证码发送模式。\r\n                verifiable_type: 'sms',\r\n                // 必须，用户收到的验证码。(教学阶段验证码统一使用 8888 )\r\n                verifiable_code: '8888',\r\n                // 如果 `verifiable_type` 为 `sms` 则必须, 手机号码。\r\n                phone: this.form.phone,\r\n                // 可选，密码，如果不输入密码，允许用户无密码注册。\r\n                password: this.form.password\r\n              })\r\n              if (resb.statusCode === 201) {\r\n                // 登陆成功\r\n                this.loginAfter(resb.data.token)\r\n              } else {\r\n                uni.showModal({\r\n                  title: '登陆失败',\r\n                  content: resb.data.message\r\n                })\r\n              }\r\n              break;\r\n            case \"email\":\r\n              let resc = await this.$u.api.userRegister({\r\n                // 必须，用户名\r\n                name: this.form.name,\r\n                // 必须，验证码发送模式。\r\n                verifiable_type: 'mail',\r\n                // 必须，用户收到的验证码。(教学阶段验证码统一使用 8888 )\r\n                verifiable_code: '8888',\r\n                // 如果 `verifiable_type` 为 `mail` 则必须, E-Mail。\r\n                email: this.form.email,\r\n                // 可选，密码，如果不输入密码，允许用户无密码注册。\r\n                password: this.form.password\r\n              })\r\n              console.log(resc)\r\n              if (resc.statusCode === 201) {\r\n                // 登陆成功\r\n                this.loginAfter(resc.data.token)\r\n              } else {\r\n                uni.showModal({\r\n                  title: '登陆失败',\r\n                  content: resc.data.message\r\n                })\r\n              }\r\n              break;\r\n            default:\r\n              uni.showToast({\r\n                title: '未知用户状态',\r\n                icon: 'loading'\r\n              })\r\n              break;\r\n          }\r\n        });\r\n\r\n      },\r\n      // 登录完成以后执行的方法\r\n      async loginAfter(token) {\r\n        // 在store中保存token\r\n        uni.setStorageSync(\"token\", token)\r\n\r\n        let res = await this.$u.api.getUserMsg()\r\n        console.log('loginAfter res: ', res)\r\n        this.userLoginAction({\r\n          name: this.form.name,\r\n          avatar: this.form.avatar,\r\n          liked: res.user.liked,\r\n          commented: res.user.commented,\r\n        })\r\n        uni.$emit(\"indexUserLogin\")\r\n      },\r\n      // 更改 登陆 注册 方式选择\r\n      sectionChange(index) {\r\n        switch (index) {\r\n          case 1:\r\n            this.loginType = \"codelogin\";\r\n            break;\r\n          case 2:\r\n            this.loginType = \"phone\";\r\n            break;\r\n          case 3:\r\n            this.loginType = \"email\";\r\n            break;\r\n          default:\r\n            this.loginType = \"pwlogin\";\r\n            break;\r\n        }\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style\r\n  lang=\"scss\"\r\n  scoped\r\n>\r\n  .login {\r\n    position: fixed;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    display: flex;\r\n    align-items: flex-end;\r\n    opacity: 0;\r\n    transition: opacity 300, z-index 0 300;\r\n    pointer-events: none;\r\n    z-index: 999;\r\n\r\n    &.show {\r\n      z-index: 9999;\r\n      opacity: 1;\r\n      pointer-events: auto;\r\n    }\r\n\r\n    .mask {\r\n      position: fixed;\r\n      width: 100%;\r\n      height: 100%;\r\n      background-color: rgba($color: #000000, $alpha: 0.3);\r\n    }\r\n\r\n    .container {\r\n      z-index: 999;\r\n      display: flex;\r\n      flex-direction: column;\r\n      width: 100%;\r\n      padding: 40upx 20upx;\r\n      background-color: #f1f1f1;\r\n      border-radius: 20upx;\r\n      align-items: center;\r\n      position: relative;\r\n\r\n      .p-name {\r\n        margin-top: 48upx;\r\n        font-size: 36upx;\r\n        font-weight: normal;\r\n      }\r\n\r\n      .close-box {\r\n        position: absolute;\r\n        right: 32upx;\r\n        top: 38upx;\r\n        width: 56.56upx;\r\n        height: 56.56upx;\r\n        padding: 10upx;\r\n\r\n        .close-img {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n      }\r\n    }\r\n\r\n    .header {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      font-size: 28upx;\r\n\r\n      .logo-wrap {\r\n        width: 144upx;\r\n        height: 144upx;\r\n        overflow: hidden;\r\n        border-radius: 20upx;\r\n      }\r\n\r\n      .logo {\r\n        width: 100%;\r\n        height: 100%;\r\n      }\r\n    }\r\n\r\n    .info {\r\n      color: #333;\r\n    }\r\n\r\n    .submit-btn {\r\n      width: 642upx;\r\n      height: 88upx;\r\n      margin-top: 60upx;\r\n      margin-bottom: 60upx;\r\n      border-radius: 44upx;\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: center;\r\n      justify-content: center;\r\n      color: #fff;\r\n      background-color: #0046f5;\r\n      font-size: 36upx;\r\n\r\n      .wechat-img {\r\n        width: 44upx;\r\n        height: 34upx;\r\n        margin: 0 18upx;\r\n      }\r\n    }\r\n\r\n    .phone-login {\r\n      color: #0046f5;\r\n      font-size: 28upx;\r\n      margin-top: 40upx;\r\n      border: none;\r\n      background-color: #f1f1f1;\r\n    }\r\n\r\n    .cancel-btn {\r\n      width: 100%;\r\n      margin-top: 60upx;\r\n      color: #333;\r\n      background-color: #f1f1f1;\r\n    }\r\n\r\n    .serve-info {\r\n      font-size: 22upx;\r\n      margin-top: 20upx;\r\n    }\r\n\r\n    .serve-text {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-size: 22upx;\r\n      color: #6079b8;\r\n      margin-top: 10upx;\r\n    }\r\n  }\r\n\r\n  button::after {\r\n    border: none;\r\n  }\r\n\r\n  .btns {\r\n    margin-top: 20upx;\r\n    text-align: center;\r\n\r\n    .ubtn {\r\n      display: inline-block;\r\n      margin: 0 20upx;\r\n    }\r\n  }\r\n\r\n  .type {\r\n    margin-top: 80upx;\r\n  }\r\n</style>","import mod from \"-!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&id=27539ebe&lang=scss&scoped=true&\"; export default mod; export * from \"-!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\App\\\\HBuilderX.3.96.2023110403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&id=27539ebe&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1703347431014\n      var cssReload = require(\"E:/App/HBuilderX.3.96.2023110403/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}